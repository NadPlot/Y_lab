# Y_lab
REST API по работе с меню ресторана

## Задача:
Написать проект на FastAPI с использованием PostgreSQL в качестве БД, и обурнуть в контейнер (Docker Compose).
В проекте следует реализовать REST API по работе с меню ресторана, все CRUD операции.

### Даны 3 сущности: Меню, Подменю, Блюдо.
Зависимости:
● У меню есть подменю, которые к ней привязаны.     
● У подменю есть блюда.     
Условия:        
● Блюдо не может быть привязано напрямую к меню, минуя подменю.     
● Блюдо не может находиться в 2-х подменю одновременно.     
● Подменю не может находиться в 2-х меню одновременно.      
● Если удалить меню, должны удалиться все подменю и блюда этого меню.       
● Если удалить подменю, должны удалиться все блюда этого подменю.       
● Цены блюд выводить с округлением до 2 знаков после запятой.       
● Во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню.        
● Во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю.     
● Во время запуска тестового сценария БД должна быть пуста.

## Requirements
 
fastapi==0.89.1   
SQLAlchemy==1.4.46     
psycopg2-binary==2.9.5    
uvicorn==0.20.0   
python-dotenv==0.21.0     

## Подключение к БД

В процессе запуска контейнера будет создана БД, имя которой указано в файле .env,
в переменной POSTGRES_DB.

Таблицы в БД созданы простым способом, при первом запуске приложения FastAPI.

app/main.py

    models.Base.metadata.create_all(bind=engine)  # Создание таблиц БД

Alembic не использовала.
Для подключения к БД использовала переменную окружения, которая
хранится в файле .env.

### Пример файла .env:

    DATABASE_URL=postgresql://username:password@db:5432/db_name
    POSTGRES_USER=username
    POSTGRES_PASSWORD=password
    POSTGRES_DB=db_name


## Запуск контейнера

    $ docker-compose up -d --build

API будет доступно по ссылке: http://0.0.0.0:8000/  
Документация API (Swagger UI): http://0.0.0.0:8000/docs
